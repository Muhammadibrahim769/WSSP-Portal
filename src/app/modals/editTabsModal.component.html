
<mat-tab-group mat-align-tabs="center">
    <form [formGroup]="operationBasicInfoForm">
    <mat-tab label="Basic information">
        <mat-card>
            <mat-card-header class="editBasicInfoCardHeader">
                Basic information
            </mat-card-header>
            <mat-card-content class="card mat-elevation-z8 mb-0">

               
                    <div class="row mt-3">
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Zone/Branch</mat-label>
                            <input matInput formControlName="txtBranchName" readonly />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Union Council</mat-label>
                            <input matInput formControlName="txtLocationName" readonly />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>TubeWell Number</mat-label>
                            <input matInput formControlName="txtProductCode" readonly />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>TubeWell Name</mat-label>
                            <input matInput formControlName="txtProductName" readonly />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>TubeWell Ref No</mat-label>
                            <input matInput formControlName="txtTubewellRefNo" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>No Of Connection <span class="required-straic">*</span></mat-label>
                            <input matInput type="number" formControlName="numOfConnections" />

                            <mat-error *ngFor="let validation of formValidationMessages.numOfConnections">
                                <mat-error
                                    *ngIf="operationBasicInfoForm.controls.numOfConnections.hasError(validation.type) && (operationBasicInfoForm.controls.numOfConnections.dirty || operationBasicInfoForm.controls.numOfConnections.touched)">
                                    {{validation.message}}
                                </mat-error>
                            </mat-error>
                        </mat-form-field>
                        <!-- <mat-form-field *ngIf="operationBasicInfoForm.controls.blnIsMetered.value"
                            class="form-group col-md-3" appearance="outline">
                            <mat-label>Avg Discharge m3/unit <span class="required-straic">*</span></mat-label>
                            <input matInput type="number" formControlName="numAvgDischargeVolume" min="0" />
                            <mat-error *ngFor="let validation of formValidationMessages.numAvgDischargeVolume">
                                <mat-error
                                    *ngIf="operationBasicInfoForm.controls.numAvgDischargeVolume.hasError(validation.type) && (operationBasicInfoForm.controls.numAvgDischargeVolume.dirty || operationBasicInfoForm.controls.numAvgDischargeVolume.touched)">
                                    {{validation.message}}
                                </mat-error>
                            </mat-error>
                        </mat-form-field> -->
                        <mat-form-field *ngIf="!operationBasicInfoForm.controls.blnIsMetered.value || operationBasicInfoForm.controls.blnIsMetered.value"
                            class="form-group col-md-3" appearance="outline">
                            <mat-label>Avg Discharge m3/hr <span class="required-straic">*</span></mat-label>
                            <input matInput type="number" formControlName="numAvgDischargeVolume" min="0" />
                            <mat-error *ngFor="let validation of formValidationMessages.numAvgDischargeVolume">
                                <mat-error
                                    *ngIf="operationBasicInfoForm.controls.numAvgDischargeVolume.hasError(validation.type) && (operationBasicInfoForm.controls.numAvgDischargeVolume.dirty || operationBasicInfoForm.controls.numAvgDischargeVolume.touched)">
                                    {{validation.message}}
                                </mat-error>
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Meter Type <span class="required-straic">*</span></mat-label>
                            <mat-select formControlName="txtMeterType">
                                <mat-option value="" hidden>Choose...</mat-option>
                                <mat-option value=""></mat-option>
                                <mat-option value="3 Phase">3 Phase</mat-option>
                                <mat-option value="AMR">AMR</mat-option>
                                <mat-option value="CT-AMR">CT-AMR</mat-option>
                            </mat-select>
                            <mat-error *ngFor="let validation of formValidationMessages.txtMeterType">
                                <mat-error
                                    *ngIf="operationBasicInfoForm.controls.txtMeterType.hasError(validation.type) && (operationBasicInfoForm.controls.txtMeterType.dirty || operationBasicInfoForm.controls.txtMeterType.touched)">
                                    {{validation.message}}
                                </mat-error>
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Warranty Date</mat-label>
                            <input matInput [matDatepicker]="dpWd" formControlName="dteWarrenty">
                            <mat-datepicker-toggle matSuffix [for]="dpWd"></mat-datepicker-toggle>
                            <mat-datepicker #dpWd></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Insatllation Date</mat-label>
                            <input matInput [matDatepicker]="abc" formControlName="dteInstallationDate">
                            <mat-datepicker-toggle matSuffix [for]="abc"></mat-datepicker-toggle>
                            <mat-datepicker #abc></mat-datepicker>
                        </mat-form-field>
                      
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Type of pumping Machineri </mat-label>
                            <input matInput formControlName="txtPumpingMachineryType" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Pumping Machineri (CHINERY)HP </mat-label>
                            <input matInput formControlName="numPumpingPower" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Water Table History(FT) </mat-label>
                            <input matInput formControlName="numPumpingDepth" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Trasforme Capcity (KVA) </mat-label>
                            <input matInput formControlName="numTransformerCapacity" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Latitude</mat-label>
                            <input matInput formControlName="lattitude" />
                        </mat-form-field>
                        <mat-form-field class="form-group col-md-3" appearance="outline">
                            <mat-label>Longitude</mat-label>
                            <input matInput formControlName="longitude" />
                        </mat-form-field>

                        <!-- <span class="form-group col-md-3"></span>           -->
                        <section class="form-group col-md-3">
                            <label class="customcheck">
                                <input formControlName="blnIsFunctional" type="checkbox" onchange=use(event)>
                                <span class="checkmark"></span> Functional
                            </label>
                        </section>
                        <section class="form-group col-md-3">
                            <label class="customcheck">
                                <input formControlName="blnIsMetered" type="checkbox">
                                <span class="checkmark"></span> Metered
                            </label>
                        </section>
                        <section class="form-group col-md-3">
                            <label class="customcheck">
                                <input formControlName="blnChamberAvailable" type="checkbox" onchange=use(event)>
                                <span class="checkmark"></span> Chamber Available
                            </label>
                        </section>


                    </div>
             

               

                <!-- <pre>{{ operationBasicInfoForm.value | json}}</pre>  -->
            </mat-card-content>
        </mat-card>
    </mat-tab>
    <mat-tab label="Warranty Items">
        <mat-card>
            <mat-card-header class="editBasicInfoCardHeader">
                Warranty Item
            </mat-card-header>
            <mat-card-content class="card mat-elevation-z8 mb-0">

              
                <div class="row mt-3">
              
                <mat-form-field class="form-group col-md-3" appearance="outline">
                    <mat-label>Item Number</mat-label>
                    <input matInput formControlName="txtItemNo"  />
                </mat-form-field>
                <mat-form-field class="form-group col-md-3" appearance="outline">
                    <mat-label>Item Name</mat-label>
                    <input matInput formControlName="txtItemName"  />
                </mat-form-field>
                <mat-form-field class="form-group col-md-3" appearance="outline">
                    <mat-label>Purchase Date</mat-label>
                    <input matInput [matDatepicker]="dpWd1" formControlName="dtePurchaseDate">
                    <mat-datepicker-toggle matSuffix [for]="dpWd1"></mat-datepicker-toggle>
                    <mat-datepicker #dpWd1></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="form-group col-md-3" appearance="outline">
                    <mat-label>Warranty Expiry  Date</mat-label>
                    <input matInput [matDatepicker]="dpWd2" formControlName="dteWarrantyExpiryDate">
                    <mat-datepicker-toggle matSuffix [for]="dpWd2"></mat-datepicker-toggle>
                    <mat-datepicker #dpWd2></mat-datepicker>
                </mat-form-field>
                </div>
              
               <div class="row mb-2">
                <div class="col pr-3 d-flex justify-content-center">
                    <div class="col mb-3 d-flex justify-content-center">
                        <button mat-raised-button (click)="addItem()"><span
                                class="material-icons pt-1 pb-2">add</span>Add
                        </button>
                    
                    </div>
                </div>
            </div>
                   
              

               

                <!-- <pre>{{ operationBasicInfoForm.value | json}}</pre>  -->
            </mat-card-content>
        </mat-card>
       <div class="table-height">
        <mat-card class="mat-elevation-z8 scroll">
            <div class="row">
                <mat-form-field class="form-group col-md-3" appearance="fill">
                    <mat-label>Columns</mat-label>
                    <mat-select [formControl]="selection" multiple>
                        <!-- <mat-select-trigger>
                                {{selection.value ? selection.value[0] : ''}}
                                <span *ngIf="selection.value?.length > 1" class="example-additional-selection">
                                  (+{{selection.value.length - 1}} {{selection.value?.length === 2 ? 'other' : 'others'}})
                                </span>
                              </mat-select-trigger> -->
                        <mat-option *ngFor="let column of tableColumn" [value]="column" (click)="selectingColumns()">
                            {{column | formControl}}
                        </mat-option>
                        <!-- <mat-option *ngFor="let topping of toppingList" [value]="topping">{{topping}}</mat-option> -->
                    </mat-select>
                </mat-form-field>
    
            </div>
            <mat-card-content class="mat-elevation-z2 mt-2 mb-1">
                <table mat-table matTableExporter #exporter="matTableExporter" [dataSource]="operationBasicInfo"
                    #operationBasicInfoSort="matSort" matSort style="border: 1px solid #bababa;">
                    <ng-container matColumnDef="txtItemNo">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Item Number</th>
                        <td mat-cell *matCellDef="let element"> {{element.txtItemNo}} </td>
                    </ng-container>
                    <ng-container matColumnDef="txtItemName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Item Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.txtItemName}} </td>
                    </ng-container>
                    <ng-container matColumnDef="dtePurchaseDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Purchase Date</th>
                        <td mat-cell *matCellDef="let element">{{element.dtePurchaseDate | date:'dd MMMM, yyyy'}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="dteWarrantyExpiryDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Warranty Expiry Date</th>
                        <td mat-cell *matCellDef="let element">{{element.dteWarrantyExpiryDate | date:'dd MMMM, yyyy'}}
                        </td>
                    </ng-container>
                    <!-- Symbol Column -->
                    <!-- (click)="onDelete(element.numWaterTestId)" -->
                    <ng-container matColumnDef="Actions">
                        <th mat-header-cell *matHeaderCellDef> Actions</th>
                        <td mat-cell *matCellDef="let element; let i = index" class="p-0 pt-2">
                            <mat-icon matTooltip="Delete" class="text-danger"(click)="onDelete(i)">
                                delete</mat-icon>
                            <!-- <mat-icon matTooltip="Edit" class="btnEdit" (click)="openEditTabsModal(element.serTWBasicInfoId)">edit</mat-icon> -->
                        </td>
                    </ng-container>
    
                    <tr mat-header-row *matHeaderRowDef="operationBasicInfoColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: operationBasicInfoColumns;">
                    </tr>
                    <div *ngIf="!isLoading">
                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No Record Found</td>
                        </tr>
                    </div>
                </table>
                <div *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; background: white; margin-top: 5PX">
                    <mat-progress-spinner class="spinnerClr" mode="indeterminate">
                    </mat-progress-spinner>
                </div>
            </mat-card-content>
            <mat-paginator #operationBasicInfoPaginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>
            <!-- <button mat-raised-button mat-flat-button (click)="downloadPDF()"><span class="material-icons pb-1 pr-1">download</span>Download
                Tubewell List</button>
            <button class="ml-3" mat-raised-button mat-flat-button (click)="exporter.exportTable('xlsx', {fileName:'TubeWell', sheet: 'sheet'})">
                <span class="material-icons pb-1 pr-1">download</span>Download Excel
            </button> -->
        </mat-card>
       </div>
    </mat-tab>
</form>
</mat-tab-group>

<div class="row mb-2 mt-5">
    <div class="col pr-3 d-flex justify-content-end">
        <div class="col mb-3 d-flex justify-content-center">
            <button mat-raised-button (click)="onUpdate()"><span
                    class="material-icons pt-1 pb-2">update</span>Update
            </button>
            <button mat-raised-button class="ml-2" mat-dialog-close>
                <span class="material-icons pt-1 pb-2">close</span>
                Cancel</button>
        </div>
    </div>
</div>